{% extends "base.html" %}

{# Mostly Generated by ChatGPT and adapted. #}
{% block content %}
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-info">{{ message }}</div>
        {% endfor %}
    {% endif %}
    <h1>Flagged Messages</h1>
    <div style="max-height: 600px; overflow-y: scroll; border: 1px solid #ccc; padding: 10px;">
        {% for report in reports %}
            <div style="border-bottom: 1px solid #eee; padding: 10px 0;">
                <p><strong>Room:</strong> {{ report.room }}</p>
                <p><strong>Message:</strong> {{ report.message }}</p>
                <p>
                    <strong>Author:</strong>
                    <a href="{% url 'accounts:profile' report.message_author_user.id %}" style="color: inherit;">
                        {{ report.message_author_user.username }}
                    </a>
                </p>
                <p><strong>Reason:</strong> {{ report.reason }}</p>
                <form method="post" action="{% url 'resolve-flagged-message' %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" name="report_id" value="{{ report.id }}" style="background-color: #4CAF50; color: white">
                        Resolve
                    </button>
                </form>
                <a href="{% url 'accounts:profile' report.message_author_user.id %}" style="text-decoration: none;">
                    <button type="button" style="background-color: #2196F3; color: white;">
                        View Author's Profile
                    </button>
                </a>
            </div>
            {% empty %}
            <p>Nothing to review!</p>
        {% endfor %}
    </div>
{% endblock %}
